<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Design Derivation — gsDesign • gsDesign</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Design Derivation — gsDesign" />
<meta property="og:description" content="gsDesign() is used to find boundaries and trial size required for a
group sequential design.
Many parameters normally take on default values and thus do not require
explicit specification. One- and two-sided designs are supported. Two-sided
designs may be symmetric or asymmetric. Wang-Tsiatis designs, including
O'Brien-Fleming and Pocock designs can be generated. Designs with common
spending functions as well as other built-in and user-specified functions
for Type I error and futility are supported. Type I error computations for
asymmetric designs may assume binding or non-binding lower bounds. The print
function has been extended using print.gsDesign() to print
gsDesign objects; see examples.
The user may ignore the structure of the value returned by gsDesign()
if the standard printing and plotting suffice; see examples.
delta and n.fix are used together to determine what sample
size output options the user seeks. The default, delta=0 and
n.fix=1, results in a &amp;#8216;generic&amp;#8217; design that may be used with
any sampling situation. Sample size ratios are provided and the user
multiplies these times the sample size for a fixed design to obtain the
corresponding group sequential analysis times. If delta&amp;gt;0,
n.fix is ignored, and delta is taken as the standardized
effect size - the signal to noise ratio for a single observation; for
example, the mean divided by the standard deviation for a one-sample normal
problem.  In this case, the sample size at each analysis is computed.  When
delta=0 and n.fix&amp;gt;1, n.fix is assumed to be the sample
size for a fixed design with no interim analyses. See examples below.
Following are further comments on the input argument test.type which
is used to control what type of error measurements are used in trial design.
The manual may also be worth some review in order to see actual formulas for
boundary crossing probabilities for the various options.  Options 3 and 5
assume the trial stops if the lower bound is crossed for Type I and Type II
error computation (binding lower bound).  For the purpose of computing Type
I error, options 4 and 6 assume the trial continues if the lower bound is
crossed (non-binding lower bound); that is a Type I error can be made by
crossing an upper bound after crossing a previous lower bound.
Beta-spending refers to error spending for the lower bound crossing
probabilities under the alternative hypothesis (options 3 and 4). In this
case, the final analysis lower and upper boundaries are assumed to be the
same. The appropriate total beta spending (power) is determined by adjusting
the maximum sample size through an iterative process for all options. Since
options 3 and 4 must compute boundary crossing probabilities under both the
null and alternative hypotheses, deriving these designs can take longer than
other options. Options 5 and 6 compute lower bound spending under the null
hypothesis." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gsDesign</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Design Derivation</h1>
    
    <div class="hidden name"><code>gsDesign.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>gsDesign()</code> is used to find boundaries and trial size required for a
group sequential design.</p>
<p>Many parameters normally take on default values and thus do not require
explicit specification. One- and two-sided designs are supported. Two-sided
designs may be symmetric or asymmetric. Wang-Tsiatis designs, including
O'Brien-Fleming and Pocock designs can be generated. Designs with common
spending functions as well as other built-in and user-specified functions
for Type I error and futility are supported. Type I error computations for
asymmetric designs may assume binding or non-binding lower bounds. The print
function has been extended using <code><a href='summary.gsDesign.html'>print.gsDesign</a>()</code> to print
<code>gsDesign</code> objects; see examples.</p>
<p>The user may ignore the structure of the value returned by <code>gsDesign()</code>
if the standard printing and plotting suffice; see examples.</p>
<p><code>delta</code> and <code>n.fix</code> are used together to determine what sample
size output options the user seeks. The default, <code>delta=0</code> and
<code>n.fix=1</code>, results in a &#8216;generic&#8217; design that may be used with
any sampling situation. Sample size ratios are provided and the user
multiplies these times the sample size for a fixed design to obtain the
corresponding group sequential analysis times. If <code>delta&gt;0</code>,
<code>n.fix</code> is ignored, and <code>delta</code> is taken as the standardized
effect size - the signal to noise ratio for a single observation; for
example, the mean divided by the standard deviation for a one-sample normal
problem.  In this case, the sample size at each analysis is computed.  When
<code>delta=0</code> and <code>n.fix&gt;1</code>, <code>n.fix</code> is assumed to be the sample
size for a fixed design with no interim analyses. See examples below.</p>
<p>Following are further comments on the input argument <code>test.type</code> which
is used to control what type of error measurements are used in trial design.
The manual may also be worth some review in order to see actual formulas for
boundary crossing probabilities for the various options.  Options 3 and 5
assume the trial stops if the lower bound is crossed for Type I and Type II
error computation (binding lower bound).  For the purpose of computing Type
I error, options 4 and 6 assume the trial continues if the lower bound is
crossed (non-binding lower bound); that is a Type I error can be made by
crossing an upper bound after crossing a previous lower bound.
Beta-spending refers to error spending for the lower bound crossing
probabilities under the alternative hypothesis (options 3 and 4). In this
case, the final analysis lower and upper boundaries are assumed to be the
same. The appropriate total beta spending (power) is determined by adjusting
the maximum sample size through an iterative process for all options. Since
options 3 and 4 must compute boundary crossing probabilities under both the
null and alternative hypotheses, deriving these designs can take longer than
other options. Options 5 and 6 compute lower bound spending under the null
hypothesis.</p>
    </div>

    <pre class="usage"><span class='fu'>gsDesign</span><span class='op'>(</span>
  k <span class='op'>=</span> <span class='fl'>3</span>,
  test.type <span class='op'>=</span> <span class='fl'>4</span>,
  alpha <span class='op'>=</span> <span class='fl'>0.025</span>,
  beta <span class='op'>=</span> <span class='fl'>0.1</span>,
  astar <span class='op'>=</span> <span class='fl'>0</span>,
  delta <span class='op'>=</span> <span class='fl'>0</span>,
  n.fix <span class='op'>=</span> <span class='fl'>1</span>,
  timing <span class='op'>=</span> <span class='fl'>1</span>,
  sfu <span class='op'>=</span> <span class='va'>sfHSD</span>,
  sfupar <span class='op'>=</span> <span class='op'>-</span><span class='fl'>4</span>,
  sfl <span class='op'>=</span> <span class='va'>sfHSD</span>,
  sflpar <span class='op'>=</span> <span class='op'>-</span><span class='fl'>2</span>,
  tol <span class='op'>=</span> <span class='fl'>1e-06</span>,
  r <span class='op'>=</span> <span class='fl'>18</span>,
  n.I <span class='op'>=</span> <span class='fl'>0</span>,
  maxn.IPlan <span class='op'>=</span> <span class='fl'>0</span>,
  nFixSurv <span class='op'>=</span> <span class='fl'>0</span>,
  endpoint <span class='op'>=</span> <span class='cn'>NULL</span>,
  delta1 <span class='op'>=</span> <span class='fl'>1</span>,
  delta0 <span class='op'>=</span> <span class='fl'>0</span>,
  overrun <span class='op'>=</span> <span class='fl'>0</span>,
  usTime <span class='op'>=</span> <span class='cn'>NULL</span>,
  lsTime <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>k</th>
      <td><p>Number of analyses planned, including interim and final.</p></td>
    </tr>
    <tr>
      <th>test.type</th>
      <td><p><code>1=</code>one-sided <br /> <code>2=</code>two-sided symmetric <br />
<code>3=</code>two-sided, asymmetric, beta-spending with binding lower bound <br />
<code>4=</code>two-sided, asymmetric, beta-spending with non-binding lower bound
<br /> <code>5=</code>two-sided, asymmetric, lower bound spending under the null
hypothesis with binding lower bound <br /> <code>6=</code>two-sided, asymmetric,
lower bound spending under the null hypothesis with non-binding lower bound.
<br /> See details, examples and manual.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>Type I error, always one-sided. Default value is 0.025.</p></td>
    </tr>
    <tr>
      <th>beta</th>
      <td><p>Type II error, default value is 0.1 (90% power).</p></td>
    </tr>
    <tr>
      <th>astar</th>
      <td><p>Normally not specified. If <code>test.type=5</code> or <code>6</code>,
<code>astar</code> specifies the total probability of crossing a lower bound at
all analyses combined.  This will be changed to \(1 - \)<code>alpha</code> when
default value of 0 is used.  Since this is the expected usage, normally
<code>astar</code> is not specified by the user.</p></td>
    </tr>
    <tr>
      <th>delta</th>
      <td><p>Effect size for theta under alternative hypothesis. This can be
set to the standardized effect size to generate a sample size if
<code>n.fix=NULL</code>. See details and examples.</p></td>
    </tr>
    <tr>
      <th>n.fix</th>
      <td><p>Sample size for fixed design with no interim; used to find
maximum group sequential sample size. For a time-to-event outcome, input
number of events required for a fixed design rather than sample size and
enter fixed design sample size (optional) in <code>nFixSurv</code>.  See details
and examples.</p></td>
    </tr>
    <tr>
      <th>timing</th>
      <td><p>Sets relative timing of interim analyses. Default of 1
produces equally spaced analyses.  Otherwise, this is a vector of length
<code>k</code> or <code>k-1</code>.  The values should satisfy <code>0 &lt; timing[1] &lt;
timing[2] &lt; ... &lt; timing[k-1] &lt; timing[k]=1</code>.</p></td>
    </tr>
    <tr>
      <th>sfu</th>
      <td><p>A spending function or a character string indicating a boundary
type (that is, &#8220;WT&#8221; for Wang-Tsiatis bounds, &#8220;OF&#8221; for
O'Brien-Fleming bounds and &#8220;Pocock&#8221; for Pocock bounds).  For
one-sided and symmetric two-sided testing is used to completely specify
spending (<code>test.type=1, 2</code>), <code>sfu</code>.  The default value is
<code>sfHSD</code> which is a Hwang-Shih-DeCani spending function.  See details,
<a href='Spending_Function_Overview.html'>Spending_Function_Overview</a>, manual and examples.</p></td>
    </tr>
    <tr>
      <th>sfupar</th>
      <td><p>Real value, default is \(-4\) which is an
O'Brien-Fleming-like conservative bound when used with the default
Hwang-Shih-DeCani spending function. This is a real-vector for many spending
functions.  The parameter <code>sfupar</code> specifies any parameters needed for
the spending function specified by <code>sfu</code>; this will be ignored for
spending functions (<code>sfLDOF</code>, <code>sfLDPocock</code>) or bound types
(&#8220;OF&#8221;, &#8220;Pocock&#8221;) that do not require parameters.</p></td>
    </tr>
    <tr>
      <th>sfl</th>
      <td><p>Specifies the spending function for lower boundary crossing
probabilities when asymmetric, two-sided testing is performed
(<code>test.type = 3</code>, <code>4</code>, <code>5</code>, or <code>6</code>).  Unlike the upper
bound, only spending functions are used to specify the lower bound.  The
default value is <code>sfHSD</code> which is a Hwang-Shih-DeCani spending
function.  The parameter <code>sfl</code> is ignored for one-sided testing
(<code>test.type=1</code>) or symmetric 2-sided testing (<code>test.type=2</code>).  See
details, spending functions, manual and examples.</p></td>
    </tr>
    <tr>
      <th>sflpar</th>
      <td><p>Real value, default is \(-2\), which, with the default
Hwang-Shih-DeCani spending function, specifies a less conservative spending
rate than the default for the upper bound.</p></td>
    </tr>
    <tr>
      <th>tol</th>
      <td><p>Tolerance for error (default is 0.000001). Normally this will not
be changed by the user.  This does not translate directly to number of
digits of accuracy, so use extra decimal places.</p></td>
    </tr>
    <tr>
      <th>r</th>
      <td><p>Integer value controlling grid for numerical integration as in
Jennison and Turnbull (2000); default is 18, range is 1 to 80.  Larger
values provide larger number of grid points and greater accuracy.  Normally
<code>r</code> will not be changed by the user.</p></td>
    </tr>
    <tr>
      <th>n.I</th>
      <td><p>Used for re-setting bounds when timing of analyses changes from
initial design; see examples.</p></td>
    </tr>
    <tr>
      <th>maxn.IPlan</th>
      <td><p>Used for re-setting bounds when timing of analyses changes
from initial design; see examples.</p></td>
    </tr>
    <tr>
      <th>nFixSurv</th>
      <td><p>If a time-to-event variable is used, <code>nFixSurv</code>
computed as the sample size from <code>nSurvival</code> may be entered to have
<code>gsDesign</code> compute the total sample size required as well as the number
of events at each analysis that will be returned in <code>n.fix</code>; this is
rounded up to an even number.</p></td>
    </tr>
    <tr>
      <th>endpoint</th>
      <td><p>An optional character string that should represent the type
of endpoint used for the study. This may be used by output functions. Types
most likely to be recognized initially are "TTE" for time-to-event outcomes
with fixed design sample size generated by <code><a href='print.nSurvival.html'>nSurvival()</a></code> and "Binomial"
for 2-sample binomial outcomes with fixed design sample size generated by
<code><a href='ciBinomial.html'>nBinomial()</a></code>.</p></td>
    </tr>
    <tr>
      <th>delta1</th>
      <td><p><code>delta1</code> and <code>delta0</code> may be used to store
information about the natural parameter scale compared to <code>delta</code> that
is a standardized effect size. <code>delta1</code> is the alternative hypothesis
parameter value on the natural parameter scale (e.g., the difference in two
binomial rates).</p></td>
    </tr>
    <tr>
      <th>delta0</th>
      <td><p><code>delta0</code> is the null hypothesis parameter value on the
natural parameter scale.</p></td>
    </tr>
    <tr>
      <th>overrun</th>
      <td><p>Scalar or vector of length <code>k-1</code> with patients enrolled
that are not included in each interim analysis.</p></td>
    </tr>
    <tr>
      <th>usTime</th>
      <td><p>Default is NULL in which case upper bound spending time is 
determined by <code>timing</code>. Otherwise, this should be a vector of length 
<code>k</code> with the spending time at each analysis (see Details).</p></td>
    </tr>
    <tr>
      <th>lsTime</th>
      <td><p>Default is NULL in which case lower bound spending time is 
determined by <code>timing</code>. Otherwise, this should be a vector of length 
<code>k</code> with the spending time at each analysis (see Details).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the class <code>gsDesign</code>. This class has the following
elements and upon return from <code>gsDesign()</code> contains:</p>
<dt>k</dt><dd><p>As
input.</p></dd> <dt>test.type</dt><dd><p>As input.</p></dd> <dt>alpha</dt><dd><p>As input.</p></dd> <dt>beta</dt><dd><p>As
input.</p></dd> <dt>astar</dt><dd><p>As input, except when <code>test.type=5</code> or <code>6</code>
and <code>astar</code> is input as 0; in this case <code>astar</code> is changed to
<code>1-alpha</code>.</p></dd> <dt>delta</dt><dd><p>The standardized effect size for which the
design is powered. Will be as input to <code>gsDesign()</code> unless it was input
as 0; in that case, value will be computed to give desired power for fixed
design with input sample size <code>n.fix</code>.</p></dd> <dt>n.fix</dt><dd><p>Sample size
required to obtain desired power when effect size is <code>delta</code>.</p></dd>
<dt>timing</dt><dd><p>A vector of length <code>k</code> containing the portion of the
total planned information or sample size at each analysis.</p></dd> <dt>tol</dt><dd><p>As
input.</p></dd> <dt>r</dt><dd><p>As input.</p></dd> <dt>n.I</dt><dd><p>Vector of length <code>k</code>. If values
are input, same values are output. Otherwise, <code>n.I</code> will contain the
sample size required at each analysis to achieve desired <code>timing</code> and
<code>beta</code> for the output value of <code>delta</code>.  If <code>delta=0</code> was
input, then this is the sample size required for the specified group
sequential design when a fixed design requires a sample size of
<code>n.fix</code>. If <code>delta=0</code> and <code>n.fix=1</code> then this is the relative
sample size compared to a fixed design; see details and examples.</p></dd>
<dt>maxn.IPlan</dt><dd><p>As input.</p></dd> <dt>nFixSurv</dt><dd><p>As input.</p></dd> <dt>nSurv</dt><dd><p>Sample
size for Lachin and Foulkes method when <code>nSurvival</code> is used for fixed
design input. If <code>nSurvival</code> is used to compute <code>n.fix</code>, then
<code>nFixSurv</code> is inflated by the same amount as <code>n.fix</code> and stored in
<code>nSurv</code>. Note that if you use <code>gsSurv</code> for time-to-event sample
size, this is not needed and a more complete output summary is given.</p></dd>
<dt>endpoint</dt><dd><p>As input.</p></dd> <dt>delta1</dt><dd><p>As input.</p></dd> <dt>delta0</dt><dd><p>As input.</p></dd>
<dt>overrun</dt><dd><p>As input.</p></dd> <dt>usTime</dt><dd><p>As input.</p></dd> <dt>lsTime</dt><dd><p>As input.</p></dd> <dt>upper</dt><dd><p>Upper bound spending function,
boundary and boundary crossing probabilities under the NULL and alternate
hypotheses. See <a href='Spending_Function_Overview.html'>Spending_Function_Overview</a> and manual for further
details.</p></dd> <dt>lower</dt><dd><p>Lower bound spending function, boundary and boundary
crossing probabilities at each analysis. Lower spending is under alternative
hypothesis (beta spending) for <code>test.type=3</code> or <code>4</code>.  For
<code>test.type=2</code>, <code>5</code> or <code>6</code>, lower spending is under the null
hypothesis. For <code>test.type=1</code>, output value is <code>NULL</code>. See
<a href='Spending_Function_Overview.html'>Spending_Function_Overview</a> and manual.</p></dd> <dt>theta</dt><dd><p>Standarized
effect size under null (0) and alternate hypothesis. If <code>delta</code> is
input, <code>theta[1]=delta</code>. If <code>n.fix</code> is input, <code>theta[1]</code> is
computed using a standard sample size formula (pseudocode):
<code>((Zalpha+Zbeta)/theta[1])^2=n.fix</code>.</p></dd> <dt>falseprobnb</dt><dd><p>For
<code>test.type=4</code> or <code>6</code>, this contains false positive probabilities
under the null hypothesis assuming that crossing a futility bound does not
stop the trial.</p></dd> <dt>en</dt><dd><p>Expected sample size accounting for early
stopping. For time-to-event outcomes, this would be the expected number of
events (although <code>gsSurv</code> will give expected sample size). For
information-based-design, this would give the expected information when the
trial stops. If <code>overrun</code> is specified, the expected sample size
includes the overrun at each interim.</p></dd>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The manual is not linked to this help file, but is available in
library/gsdesign/doc/gsDesignManual.pdf in the directory where R is
installed.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Jennison C and Turnbull BW (2000), <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton: Chapman and Hall.
Lan KK, DeMets DL (1989). Group sequential procedures: calendar versus information 
time. <em>Statistics in medicine</em> 8(10):1191-8.
Liu, Q, Lim, P, Nuamah, I, and Li, Y (2012), On adaptive error spending approach for 
group sequential trials with random information levels. <em>Journal of biopharmaceutical statistics</em>; 22(4), 687-699.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='gsDesign package overview.html'>gsDesign package overview</a>, <a href='summary.gsDesign.html'>gsBoundSummary</a>, 
<a href='plot.gsDesign.html'>plot.gsDesign</a>,
<code><a href='gsProbability.html'>gsProbability</a></code>, <a href='Spending_Function_Overview.html'>Spending_Function_Overview</a>,</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Keaven Anderson <a href='mailto:keaven\_anderson@merck.'>keaven\_anderson@merck.</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>
<span class='co'>#  symmetric, 2-sided design with O'Brien-Fleming-like boundaries</span>
<span class='co'>#  lower bound is non-binding (ignored in Type I error computation)</span>
<span class='co'>#  sample size is computed based on a fixed design requiring n=800</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>gsDesign</span><span class='op'>(</span>k <span class='op'>=</span> <span class='fl'>5</span>, test.type <span class='op'>=</span> <span class='fl'>2</span>, n.fix <span class='op'>=</span> <span class='fl'>800</span><span class='op'>)</span>

<span class='co'># note that "x" below is equivalent to print(x) and print.gsDesign(x)</span>
<span class='va'>x</span>
</div><div class='output co'>#&gt; Symmetric two-sided group sequential design with
#&gt; 90 % power and 2.5 % Type I Error.
#&gt; Spending computations assume trial stops
#&gt; if a bound is crossed.
#&gt; 
#&gt;               
#&gt;   Analysis  N   Z   Nominal p  Spend
#&gt;          1 164 3.25    0.0006 0.0006
#&gt;          2 328 2.99    0.0014 0.0013
#&gt;          3 492 2.69    0.0036 0.0028
#&gt;          4 656 2.37    0.0088 0.0063
#&gt;          5 819 2.03    0.0214 0.0140
#&gt;      Total                    0.0250 
#&gt; 
#&gt; ++ alpha spending:
#&gt;  Hwang-Shih-DeCani spending function with gamma = -4.
#&gt; 
#&gt; Boundary crossing probabilities and expected sample size
#&gt; assume any cross stops the trial
#&gt; 
#&gt; Upper boundary (power or Type I Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3      4      5 Total  E{N}
#&gt;   0.0000 0.0006 0.0013 0.0028 0.0063 0.0140 0.025 812.8
#&gt;   0.1146 0.0370 0.1512 0.2647 0.2699 0.1771 0.900 589.3
#&gt; 
#&gt; Lower boundary (futility or Type II Error)
#&gt;           Analysis
#&gt;    Theta     1      2      3      4     5 Total
#&gt;   0.0000 6e-04 0.0013 0.0028 0.0063 0.014 0.025
#&gt;   0.1146 0e+00 0.0000 0.0000 0.0000 0.000 0.000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='img'><img src='gsDesign-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span>, plottype <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='img'><img src='gsDesign-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Assuming after trial was designed actual analyses occurred after</span>
<span class='co'># 300, 600, and 860 patients, reset bounds</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='fu'>gsDesign</span><span class='op'>(</span>
  k <span class='op'>=</span> <span class='fl'>3</span>, test.type <span class='op'>=</span> <span class='fl'>2</span>, n.fix <span class='op'>=</span> <span class='fl'>800</span>, n.I <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>300</span>, <span class='fl'>600</span>, <span class='fl'>860</span><span class='op'>)</span>,
  maxn.IPlan <span class='op'>=</span> <span class='va'>x</span><span class='op'>$</span><span class='va'>n.I</span><span class='op'>[</span><span class='va'>x</span><span class='op'>$</span><span class='va'>k</span><span class='op'>]</span>
<span class='op'>)</span>
<span class='va'>y</span>
</div><div class='output co'>#&gt; Symmetric two-sided group sequential design with
#&gt; 90 % power and 2.5 % Type I Error.
#&gt; Spending computations assume trial stops
#&gt; if a bound is crossed.
#&gt; 
#&gt;               
#&gt;   Analysis  N   Z   Nominal p  Spend
#&gt;          1 300 2.96    0.0016 0.0016
#&gt;          2 600 2.44    0.0074 0.0067
#&gt;          3 860 2.01    0.0220 0.0167
#&gt;      Total                    0.0250 
#&gt; 
#&gt; ++ alpha spending:
#&gt;  Hwang-Shih-DeCani spending function with gamma = -4.
#&gt; 
#&gt; Boundary crossing probabilities and expected sample size
#&gt; assume any cross stops the trial
#&gt; 
#&gt; Upper boundary (power or Type I Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3  Total  E{N}
#&gt;   0.0000 0.0016 0.0067 0.0167 0.0250 854.8
#&gt;   0.1146 0.1655 0.4833 0.2654 0.9142 641.6
#&gt; 
#&gt; Lower boundary (futility or Type II Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3 Total
#&gt;   0.0000 0.0016 0.0067 0.0167 0.025
#&gt;   0.1146 0.0000 0.0000 0.0000 0.000</div><div class='input'>
<span class='co'>#  asymmetric design with user-specified spending that is non-binding</span>
<span class='co'>#  sample size is computed relative to a fixed design with n=1000</span>
<span class='va'>sfup</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.033333</span>, <span class='fl'>.063367</span>, <span class='fl'>.1</span><span class='op'>)</span>
<span class='va'>sflp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.25</span>, <span class='fl'>.5</span>, <span class='fl'>.75</span><span class='op'>)</span>
<span class='va'>timing</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.1</span>, <span class='fl'>.4</span>, <span class='fl'>.7</span><span class='op'>)</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>gsDesign</span><span class='op'>(</span>
  k <span class='op'>=</span> <span class='fl'>4</span>, timing <span class='op'>=</span> <span class='va'>timing</span>, sfu <span class='op'>=</span> <span class='va'>sfPoints</span>, sfupar <span class='op'>=</span> <span class='va'>sfup</span>, sfl <span class='op'>=</span> <span class='va'>sfPoints</span>,
  sflpar <span class='op'>=</span> <span class='va'>sflp</span>, n.fix <span class='op'>=</span> <span class='fl'>1000</span>
<span class='op'>)</span>
<span class='va'>x</span>
</div><div class='output co'>#&gt; Asymmetric two-sided group sequential design with
#&gt; 90 % power and 2.5 % Type I Error.
#&gt; Upper bound spending computations assume
#&gt; trial continues if lower bound is crossed.
#&gt; 
#&gt;                   ----Lower bounds----  ----Upper bounds-----
#&gt;   Analysis   N    Z   Nominal p Spend+  Z   Nominal p Spend++
#&gt;          1  123 -0.83    0.2041  0.025 3.14    0.0008  0.0008
#&gt;          2  489  0.39    0.6513  0.025 3.16    0.0008  0.0008
#&gt;          3  855  1.26    0.8966  0.025 3.06    0.0011  0.0009
#&gt;          4 1222  1.98    0.9761  0.025 1.98    0.0239  0.0225
#&gt;      Total                      0.1000                 0.0250 
#&gt; + lower bound beta spending (under H1):
#&gt;  User-specified spending function with Points = 0.25 0.5 0.75 1.
#&gt; ++ alpha spending:
#&gt;  User-specified spending function with Points = 0.033333 0.063367 0.1 1.
#&gt; 
#&gt; Boundary crossing probabilities and expected sample size
#&gt; assume any cross stops the trial
#&gt; 
#&gt; Upper boundary (power or Type I Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3      4  Total  E{N}
#&gt;   0.0000 0.0008 0.0007 0.0009 0.0177 0.0202 564.0
#&gt;   0.1025 0.0222 0.1716 0.2969 0.4094 0.9000 907.4
#&gt; 
#&gt; Lower boundary (futility or Type II Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3      4  Total
#&gt;   0.0000 0.2041 0.4703 0.2361 0.0693 0.9798
#&gt;   0.1025 0.0250 0.0250 0.0250 0.0250 0.1000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='img'><img src='gsDesign-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span>, plottype <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='img'><img src='gsDesign-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># same design, but with relative sample sizes</span>
<span class='fu'>gsDesign</span><span class='op'>(</span>
  k <span class='op'>=</span> <span class='fl'>4</span>, timing <span class='op'>=</span> <span class='va'>timing</span>, sfu <span class='op'>=</span> <span class='va'>sfPoints</span>, sfupar <span class='op'>=</span> <span class='va'>sfup</span>, sfl <span class='op'>=</span> <span class='va'>sfPoints</span>,
  sflpar <span class='op'>=</span> <span class='va'>sflp</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; Asymmetric two-sided group sequential design with
#&gt; 90 % power and 2.5 % Type I Error.
#&gt; Upper bound spending computations assume
#&gt; trial continues if lower bound is crossed.
#&gt; 
#&gt;            Sample
#&gt;             Size    ----Lower bounds----  ----Upper bounds-----
#&gt;   Analysis Ratio*   Z   Nominal p Spend+  Z   Nominal p Spend++
#&gt;          1  0.122 -0.83    0.2041  0.025 3.14    0.0008  0.0008
#&gt;          2  0.488  0.39    0.6513  0.025 3.16    0.0008  0.0008
#&gt;          3  0.855  1.26    0.8966  0.025 3.06    0.0011  0.0009
#&gt;          4  1.221  1.98    0.9761  0.025 1.98    0.0239  0.0225
#&gt;      Total                        0.1000                 0.0250 
#&gt; + lower bound beta spending (under H1):
#&gt;  User-specified spending function with Points = 0.25 0.5 0.75 1.
#&gt; ++ alpha spending:
#&gt;  User-specified spending function with Points = 0.033333 0.063367 0.1 1.
#&gt; * Sample size ratio compared to fixed design with no interim
#&gt; 
#&gt; Boundary crossing probabilities and expected sample size
#&gt; assume any cross stops the trial
#&gt; 
#&gt; Upper boundary (power or Type I Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3      4  Total   E{N}
#&gt;   0.0000 0.0008 0.0007 0.0009 0.0177 0.0202 0.5640
#&gt;   3.2415 0.0222 0.1716 0.2969 0.4094 0.9000 0.9074
#&gt; 
#&gt; Lower boundary (futility or Type II Error)
#&gt;           Analysis
#&gt;    Theta      1      2      3      4  Total
#&gt;   0.0000 0.2041 0.4703 0.2361 0.0693 0.9798
#&gt;   3.2415 0.0250 0.0250 0.0250 0.0250 0.1000</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


